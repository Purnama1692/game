<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game interaktif</title>
    <style>
        body {
            background: linear-gradient(120deg, #1f4037, #99f2c8);
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            height: 100vh;
            margin: 0;
            color: #fff;
            overflow: hidden;
        }
        h1 { margin-bottom: 10px; }
        #game {
            display: flex;
            justify-content: center;
            align-items: flex-end;
            width: 90%;
            max-width: 800px;
            height: 300px;
            background: rgba(0,0,0,0.2);
            border-radius: 10px;
            padding: 20px;
            position: relative;
        }
        .peg {
            flex: 1;
            margin: 0 10px;
            position: relative;
            display: flex;
            flex-direction: column-reverse;
            align-items: center;
            border-bottom: 5px solid #fff;
        }
        .rod {
            width: 10px;
            height: 200px;
            background: #fff;
            position: absolute;
            bottom: 0;
        }
        .disk {
            height: 25px;
            border-radius: 5px;
            margin: 2px 0;
            text-align: center;
            color: #000;
            font-weight: bold;
            cursor: grab;
            transition: transform 0.3s ease, background 0.3s ease;
        }
        .disk:active { cursor: grabbing; }
        .disk:hover { transform: scale(1.1); background: #ffd166 !important; }
        #moves { margin-top: 10px; }
        @keyframes winEffect { 0%{background:#1f4037;}50%{background:#ff4b5c;}100%{background:#1f4037;} }
        #winMessage {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(0);
            font-size: 2em; color: #fff; background: rgba(0,0,0,0.7);
            padding: 20px 40px; border-radius: 10px; animation: none; text-align: center;
        }
        @keyframes popUp { 0%{transform:translate(-50%,-50%)scale(0);opacity:0;}50%{transform:translate(-50%,-50%)scale(1.2);opacity:1;}100%{transform:translate(-50%,-50%)scale(1);opacity:1;} }
    </style>
</head>
<body>
    <h1>Pemecahan Menggunakan Metode Dekomposisi</h1>
    <div id="game">
        <div class="peg" id="peg1"><div class="rod"></div></div>
        <div class="peg" id="peg2"><div class="rod"></div></div>
        <div class="peg" id="peg3"><div class="rod"></div></div>
        <div id="winMessage"></div>
    </div>
    <p id="moves">Moves: 0</p>

    <script>
        const pegs = document.querySelectorAll('.peg');
        const movesEl = document.getElementById('moves');
        const winMessage = document.getElementById('winMessage');
        let moves = 0;
        const diskCount = 4;
        const colors = ['#ff4b5c', '#ffb400', '#06d6a0', '#118ab2'];

        // Create 4 disks on peg1
        for (let i = diskCount; i >= 1; i--) {
            let disk = document.createElement('div');
            disk.classList.add('disk');
            disk.draggable = true;
            disk.style.width = (i * 50) + 'px';
            disk.style.background = colors[i-1];
            disk.dataset.size = i;
            pegs[0].appendChild(disk);
        }

        let draggedDisk = null;

        document.querySelectorAll('.disk').forEach(disk => {
            disk.addEventListener('dragstart', e => {
                const parentPeg = disk.parentElement;
                const topDisk = parentPeg.lastElementChild.classList.contains('rod') ? null : parentPeg.lastElementChild;
                if (disk === topDisk) draggedDisk = disk; else e.preventDefault();
            });
            disk.addEventListener('dragend', () => { draggedDisk = null; });
        });

        pegs.forEach(peg => {
            peg.addEventListener('dragover', e => { e.preventDefault(); });
            peg.addEventListener('drop', e => {
                if (!draggedDisk) return;
                const targetTop = peg.lastElementChild.classList.contains('rod') ? null : peg.lastElementChild;
                if (!targetTop || parseInt(draggedDisk.dataset.size) < parseInt(targetTop.dataset.size)) {
                    peg.appendChild(draggedDisk);
                    moves++;
                    movesEl.textContent = 'Moves: ' + moves;
                    checkWin();
                }
            });
        });

        function checkWin() {
            if (pegs[2].childElementCount === diskCount + 1) {
                document.body.style.animation = 'winEffect 1s ease 3';
                winMessage.textContent = `ðŸŽ‰ YOU WON! ðŸŽ‰\nTotal Moves: ${moves}`;
                winMessage.style.animation = 'popUp 0.8s forwards';
            }
        }
    </script>
</body>
</html>
